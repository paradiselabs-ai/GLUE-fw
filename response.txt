Traceback (most recent call last):
PS C:\Users\zadka\Desktop\GLUE-fw> glue run examples/agent_communication.glue --input "talk about llms"
2025-04-10 02:59:49,263 - glue.run_app - INFO - Parsing GLUE file: examples/agent_communication.glue
2025-04-10 02:59:49,268 - glue.run_app - INFO - Parsing tokens into AST
2025-04-10 02:59:49,268 - glue.run_app - INFO - Building GLUE application
2025-04-10 02:59:49,269 - glue.core.adhesive - INFO - Adhesive system initialized
2025-04-10 02:59:49,601 - glue.model.openrouter - INFO - Initialized OpenRouter client for model gemini-1.5-pro
2025-04-10 02:59:49,602 - glue.core.base_model - INFO - Loaded provider openrouter for model researcher
2025-04-10 02:59:49,602 - glue.model - INFO - Model researcher initialized with adhesives: {<AdhesiveType.VELCRO: 'velcro'>, <AdhesiveType.GLUE: 'glue'>}
2025-04-10 02:59:49,907 - glue.model.openrouter - INFO - Initialized OpenRouter client for model gemini-1.5-pro
2025-04-10 02:59:49,908 - glue.core.base_model - INFO - Loaded provider openrouter for model assistant
2025-04-10 02:59:49,908 - glue.model - INFO - Model assistant initialized with adhesives: {<AdhesiveType.VELCRO: 'velcro'>, <AdhesiveType.GLUE: 'glue'>}
2025-04-10 02:59:50,176 - glue.model.openrouter - INFO - Initialized OpenRouter client for model gemini-1.5-pro
2025-04-10 02:59:50,177 - glue.core.base_model - INFO - Loaded provider openrouter for model writer
2025-04-10 02:59:50,177 - glue.model - INFO - Model writer initialized with adhesives: {<AdhesiveType.VELCRO: 'velcro'>, <AdhesiveType.GLUE: 'glue'>}
2025-04-10 02:59:50,441 - glue.model.openrouter - INFO - Initialized OpenRouter client for model gemini-1.5-pro
2025-04-10 02:59:50,441 - glue.core.base_model - INFO - Loaded provider openrouter for model editor
2025-04-10 02:59:50,442 - glue.model - INFO - Model editor initialized with adhesives: {<AdhesiveType.GLUE: 'glue'>}
2025-04-10 02:59:50,442 - glue.team - INFO - Added model researcher to team research with role lead
2025-04-10 02:59:50,443 - glue.app - INFO - Added tool web_search to team research
2025-04-10 02:59:50,443 - glue.app - INFO - Added tool code_interpreter to team research
2025-04-10 02:59:50,443 - glue.app - INFO - Added tool communicate to team research
2025-04-10 02:59:50,444 - glue.team - INFO - Added model writer to team docs with role lead
2025-04-10 02:59:50,444 - glue.app - INFO - Added tool file_handler to team docs
2025-04-10 02:59:50,444 - glue.app - INFO - Added tool communicate to team docs
[DEBUG] Before app.setup()
2025-04-10 02:59:50,445 - glue.app - WARNING - Failed to initialize tool web_search: API key is required for SearchProviderType.SERP provider
2025-04-10 02:59:50,445 - glue.app - INFO - Initialized tool: file_handler
2025-04-10 02:59:50,445 - glue.app - INFO - Initialized tool: code_interpreter
2025-04-10 02:59:50,446 - glue.team - INFO - Team research setup complete
2025-04-10 02:59:50,446 - glue.team - INFO - Team docs setup complete
2025-04-10 02:59:50,447 - glue.app - INFO - Setting up 1 flows
2025-04-10 02:59:50,447 - glue.core.flow - INFO - Establishing flow between research and docs (BIDIRECTIONAL)
2025-04-10 02:59:50,447 - glue.team - INFO - Registered outgoing flow from research to docs
2025-04-10 02:59:50,448 - glue.team - INFO - Registered incoming flow to docs from research
2025-04-10 02:59:50,448 - glue.app - INFO - Established bidirectional relationship between research and docs
[DEBUG] After app.setup()
2025-04-10 02:59:50,448 - glue.run_app - INFO - Running with input: talk about llms
2025-04-10 02:59:51,048 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-04-10 02:59:51,049 - glue.model.openrouter - ERROR - Error generating response from OpenRouter: Error code: 400 - {'error': {'message': 'gemini-1.5-pro is not a valid model ID', 'code': 400}, 'user_id': 'user_2ikxXSYolrfkSleAQsBa7FBIP5z'}
2025-04-10 02:59:51,050 - glue.core.base_model - ERROR - Error generating response with provider: Error code: 400 - {'error': {'message': 'gemini-1.5-pro is not a valid model ID', 'code': 400}, 'user_id': 'user_2ikxXSYolrfkSleAQsBa7FBIP5z'}
2025-04-10 02:59:51,050 - glue.core.base_model - ERROR - Exception details:
Traceback (most recent call last):
  File "C:\Users\zadka\Desktop\GLUE-fw\src\glue\core\base_model.py", line 709, in generate_response
    response = await self.provider.generate_response(provider_messages, provider_tools)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zadka\Desktop\GLUE-fw\src\glue\core\providers\openrouter.py", line 182, in generate_response
    response = await self.client.chat.completions.create(**api_params)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\zadka\Desktop\GLUE-fw\.venv\Lib\site-packages\openai\resources\chat\completions\completions.py", line 2000, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "c:\Users\zadka\Desktop\GLUE-fw\.venv\Lib\site-packages\openai\_base_client.py", line 1767, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\zadka\Desktop\GLUE-fw\.venv\Lib\site-packages\openai\_base_client.py", line 1461, in request
    return await self._request(
           ^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\zadka\Desktop\GLUE-fw\.venv\Lib\site-packages\openai\_base_client.py", line 1562, in _request
    raise self._make_status_error_from_response(err.response) from None
openai.BadRequestError: Error code: 400 - {'error': {'message': 'gemini-1.5-pro is not a valid model ID', 'code': 400}, 'user_id': 'user_2ikxXSYolrfkSleAQsBa7FBIP5z'}
2025-04-10 02:59:51,055 - glue.core.base_model - ERROR - Error generating response: Error code: 400 - {'error': {'message': 'gemini-1.5-pro is not a valid model ID', 'code': 400}, 'user_id': 'user_2ikxXSYolrfkSleAQsBa7FBIP5z'}
2025-04-10 02:59:51,056 - glue.app - ERROR - Error processing message with team research: 1 validation error for Message
role
  Value error, Role must be one of {'system', 'assistant', 'tool', 'user'} [type=value_error, input_value='model', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/value_error
2025-04-10 02:59:51,056 - glue.app - ERROR - Exception details:
Traceback (most recent call last):
  File "C:\Users\zadka\Desktop\GLUE-fw\src\glue\core\app.py", line 493, in run
    response = await team.process_message(input_text)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zadka\Desktop\GLUE-fw\src\glue\core\teams.py", line 466, in process_message
    response_message = Message(
                       ^^^^^^^^
  File "c:\Users\zadka\Desktop\GLUE-fw\.venv\Lib\site-packages\pydantic\main.py", line 243, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for Message
role
  Value error, Role must be one of {'system', 'assistant', 'tool', 'user'} [type=value_error, input_value='model', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/value_error
2025-04-10 02:59:51,319 - httpx - INFO - HTTP Request: POST https://openrouter.ai/api/v1/chat/completions "HTTP/1.1 400 Bad Request"
2025-04-10 02:59:51,319 - glue.model.openrouter - ERROR - Error generating response from OpenRouter: Error code: 400 - {'error': {'message': 'gemini-1.5-pro is not a valid model ID', 'code': 400}, 'user_id': 'user_2ikxXSYolrfkSleAQsBa7FBIP5z'}
2025-04-10 02:59:51,320 - glue.core.base_model - ERROR - Error generating response with provider: Error code: 400 - {'error': {'message': 'gemini-1.5-pro is not a valid model ID', 'code': 400}, 'user_id': 'user_2ikxXSYolrfkSleAQsBa7FBIP5z'}
2025-04-10 02:59:51,320 - glue.core.base_model - ERROR - Exception details:
Traceback (most recent call last):
  File "C:\Users\zadka\Desktop\GLUE-fw\src\glue\core\base_model.py", line 709, in generate_response
    response = await self.provider.generate_response(provider_messages, provider_tools)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zadka\Desktop\GLUE-fw\src\glue\core\providers\openrouter.py", line 182, in generate_response
    response = await self.client.chat.completions.create(**api_params)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\zadka\Desktop\GLUE-fw\.venv\Lib\site-packages\openai\resources\chat\completions\completions.py", line 2000, in create
    return await self._post(
           ^^^^^^^^^^^^^^^^^
  File "c:\Users\zadka\Desktop\GLUE-fw\.venv\Lib\site-packages\openai\_base_client.py", line 1767, in post
    return await self.request(cast_to, opts, stream=stream, stream_cls=stream_cls)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\zadka\Desktop\GLUE-fw\.venv\Lib\site-packages\openai\_base_client.py", line 1461, in request
    return await self._request(
           ^^^^^^^^^^^^^^^^^^^^
  File "c:\Users\zadka\Desktop\GLUE-fw\.venv\Lib\site-packages\openai\_base_client.py", line 1562, in _request
    raise self._make_status_error_from_response(err.response) from None
openai.BadRequestError: Error code: 400 - {'error': {'message': 'gemini-1.5-pro is not a valid model ID', 'code': 400}, 'user_id': 'user_2ikxXSYolrfkSleAQsBa7FBIP5z'}
2025-04-10 02:59:51,324 - glue.core.base_model - ERROR - Error generating response: Error code: 400 - {'error': {'message': 'gemini-1.5-pro is not a valid model ID', 'code': 400}, 'user_id': 'user_2ikxXSYolrfkSleAQsBa7FBIP5z'}
2025-04-10 02:59:51,324 - glue.app - ERROR - Error processing message with team docs: 1 validation error for Message
role
  Value error, Role must be one of {'system', 'assistant', 'tool', 'user'} [type=value_error, input_value='model', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/value_error
2025-04-10 02:59:51,326 - glue.app - ERROR - Exception details:
Traceback (most recent call last):
  File "C:\Users\zadka\Desktop\GLUE-fw\src\glue\core\app.py", line 493, in run
    response = await team.process_message(input_text)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\Users\zadka\Desktop\GLUE-fw\src\glue\core\teams.py", line 466, in process_message
    response_message = Message(
                       ^^^^^^^^
  File "c:\Users\zadka\Desktop\GLUE-fw\.venv\Lib\site-packages\pydantic\main.py", line 243, in __init__
    validated_self = self.__pydantic_validator__.validate_python(data, self_instance=self)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
pydantic_core._pydantic_core.ValidationError: 1 validation error for Message
role
  Value error, Role must be one of {'system', 'assistant', 'tool', 'user'} [type=value_error, input_value='model', input_type=str]
    For further information visit https://errors.pydantic.dev/2.11/v/value_error
I'm sorry, I couldn't process your message. Please try again.